"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4264],{2545:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>t,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1/\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528","title":"\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528","description":"Talk is cheap, Let me show your the code.","source":"@site/docs/\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1/\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528.md","sourceDirName":"\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1","slug":"/\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1/\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528","permalink":"/docs/\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1/\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u4ee3\u7801\u7247\u6bb5/C++/\u5947\u6deb\u5de7\u8ba1/\u9650\u5236\u5355\u7ebf\u7a0b\u8c03\u7528.md","tags":[],"version":"current","frontMatter":{},"sidebar":"code_snap"}');var r=n(4848),i=n(8453);const t={},c=void 0,l={},h=[{value:"<strong>\ud83d\udccc \u4ee3\u7801\u8be6\u7ec6\u89e3\u6790</strong>",id:"-\u4ee3\u7801\u8be6\u7ec6\u89e3\u6790",level:2},{value:"<strong>\ud83d\udccd \u4e3b\u8981\u53d8\u91cf</strong>",id:"-\u4e3b\u8981\u53d8\u91cf",level:3},{value:"<strong>\ud83d\udccd \u5173\u952e\u903b\u8f91</strong>",id:"-\u5173\u952e\u903b\u8f91",level:3},{value:"<strong>\ud83d\udd0d \u4e24\u79cd\u60c5\u51b5\u5206\u6790</strong>",id:"-\u4e24\u79cd\u60c5\u51b5\u5206\u6790",level:2},{value:"<strong>\u2705 \u60c5\u51b5 1\uff1a\u4e24\u4e2a\u7ebf\u7a0b\u300c\u5148\u540e\u300d\u8c03\u7528</strong>",id:"-\u60c5\u51b5-1\u4e24\u4e2a\u7ebf\u7a0b\u5148\u540e\u8c03\u7528",level:3},{value:"<strong>\u5047\u8bbe\uff1a</strong>",id:"\u5047\u8bbe",level:4},{value:"<strong>\u6267\u884c\u6b65\u9aa4\uff1a</strong>",id:"\u6267\u884c\u6b65\u9aa4",level:4},{value:"<strong>\u2705 \u60c5\u51b5 2\uff1a\u4e24\u4e2a\u7ebf\u7a0b\u300c\u540c\u65f6\u300d\u8c03\u7528</strong>",id:"-\u60c5\u51b5-2\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8c03\u7528",level:3},{value:"<strong>\u5047\u8bbe\uff1a</strong>",id:"\u5047\u8bbe-1",level:4},{value:"<strong>\u6267\u884c\u6b65\u9aa4\uff1a</strong>",id:"\u6267\u884c\u6b65\u9aa4-1",level:4},{value:"<strong>\ud83d\udccc \u4e3a\u4ec0\u4e48 CAS \u662f\u5173\u952e\uff1f</strong>",id:"-\u4e3a\u4ec0\u4e48-cas-\u662f\u5173\u952e",level:2},{value:"<strong>\ud83d\udee0 \u603b\u7ed3</strong>",id:"-\u603b\u7ed3",level:2}];function o(e){const s={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Talk is cheap, Let me show your the code."}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u4e8e\u4fdd\u8bc1\u7279\u6b8a\u573a\u666f\u4e2d\uff0c\u67d0\u4e2a\u7279\u5b9a\u51fd\u6570\u53ea\u80fd\u88ab\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u3002\u5f53\u6709\u591a\u4e2a\u7ebf\u7a0b\u8c03\u7528\u65f6\uff0c\u89e6\u53d1\u65ad\u8a00\u3002"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"-\u4ee3\u7801\u8be6\u7ec6\u89e3\u6790",children:(0,r.jsx)(s.strong,{children:"\ud83d\udccc \u4ee3\u7801\u8be6\u7ec6\u89e3\u6790"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-C++",children:'#define THREAD_GUARD()                                           \t\t\t\\\r\n    static std::atomic<std::thread::id> stored_thread_id;        \t\t\t\\\r\n    std::thread::id current_thread_id = std::this_thread::get_id(); \t\t\\\r\n    std::thread::id expected = std::thread::id();               \t\t\t\\\r\n                                                                 \t\t\t\\\r\n    /* CAS \u64cd\u4f5c\uff1a\u5982\u679c stored_thread_id \u8fd8\u662f\u9ed8\u8ba4\u503c\uff0c\u5219\u5c1d\u8bd5\u8bbe\u7f6e\u4e3a\u5f53\u524d\u7ebf\u7a0b ID */ \t  \\\r\n    stored_thread_id.compare_exchange_strong(expected, current_thread_id); \t\\\r\n                                                                 \t\t\t\\\r\n    /* \u73b0\u5728 stored_thread_id \u8981\u4e48\u662f\u5f53\u524d\u7ebf\u7a0b ID\uff0c\u8981\u4e48\u662f\u4e4b\u524d\u7684\u7ebf\u7a0b ID */ \t\t\t\\\r\n    assert(stored_thread_id.load() == current_thread_id && "Function called by multiple threads!");\n'})}),"\n",(0,r.jsx)(s.h3,{id:"-\u4e3b\u8981\u53d8\u91cf",children:(0,r.jsx)(s.strong,{children:"\ud83d\udccd \u4e3b\u8981\u53d8\u91cf"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u2192 ",(0,r.jsx)(s.strong,{children:"\u5b58\u50a8\u8c03\u7528\u6b64\u51fd\u6570\u7684\u7ebf\u7a0b ID"}),"\uff08\u9759\u6001\u7684 ",(0,r.jsx)(s.code,{children:"std::atomic<std::thread::id>"}),"\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_thread_id"})," \u2192 ",(0,r.jsx)(s.strong,{children:"\u5f53\u524d\u6b63\u5728\u8c03\u7528\u8be5\u51fd\u6570\u7684\u7ebf\u7a0b\u7684 ID"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"expected"})," \u2192 ",(0,r.jsx)(s.strong,{children:"CAS \u64cd\u4f5c\u7684\u5bf9\u6bd4\u503c"}),"\uff0c\u521d\u59cb\u4e3a ",(0,r.jsx)(s.code,{children:"std::thread::id()"}),"\uff08\u672a\u521d\u59cb\u5316\u72b6\u6001\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"-\u5173\u952e\u903b\u8f91",children:(0,r.jsx)(s.strong,{children:"\ud83d\udccd \u5173\u952e\u903b\u8f91"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u521d\u6b21\u8c03\u7528"}),"\uff1a",(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u8fd8\u662f\u9ed8\u8ba4\u503c\uff08\u672a\u521d\u59cb\u5316\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u4f7f\u7528 CAS (",(0,r.jsx)(s.code,{children:"compare_exchange_strong()"}),")\uff1a"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u5982\u679c ",(0,r.jsx)(s.code,{children:"stored_thread_id == expected (std::thread::id())"}),"\uff1a","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u8bf4\u660e\u5f53\u524d\u51fd\u6570\u662f ",(0,r.jsx)(s.strong,{children:"\u7b2c\u4e00\u4e2a\u88ab\u8c03\u7528"}),"\uff0c\u5c06 ",(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u8bbe\u7f6e\u4e3a ",(0,r.jsx)(s.code,{children:"current_thread_id"}),"\uff08\u5f53\u524d\u7ebf\u7a0b ID\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\u5982\u679c ",(0,r.jsx)(s.code,{children:"stored_thread_id != expected"}),"\uff1a","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u8bf4\u660e\u5df2\u6709\u7ebf\u7a0b\u8c03\u7528\u8fc7\u8be5\u51fd\u6570\uff0c\u4e0d\u80fd\u4fee\u6539 ",(0,r.jsx)(s.code,{children:"stored_thread_id"}),"\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u6700\u540e\u8fdb\u884c\u65ad\u8a00\uff1a"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u8981\u4e48\u662f ",(0,r.jsx)(s.strong,{children:"\u7b2c\u4e00\u4e2a\u8c03\u7528\u7ebf\u7a0b\u7684 ID"}),"\uff0c\u8981\u4e48\u662f ",(0,r.jsx)(s.strong,{children:"\u4e4b\u524d\u5df2\u7ecf\u5b58\u50a8\u7684 ID"}),"\u3002"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["\u5982\u679c\u5f53\u524d\u7ebf\u7a0b\u7684 ID \u548c ",(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u4e0d\u5339\u914d\uff0c\u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"}),"\uff0c\u7a0b\u5e8f\u5d29\u6e83\uff01"]})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-\u4e24\u79cd\u60c5\u51b5\u5206\u6790",children:(0,r.jsx)(s.strong,{children:"\ud83d\udd0d \u4e24\u79cd\u60c5\u51b5\u5206\u6790"})}),"\n",(0,r.jsx)(s.h3,{id:"-\u60c5\u51b5-1\u4e24\u4e2a\u7ebf\u7a0b\u5148\u540e\u8c03\u7528",children:(0,r.jsx)(s.strong,{children:"\u2705 \u60c5\u51b5 1\uff1a\u4e24\u4e2a\u7ebf\u7a0b\u300c\u5148\u540e\u300d\u8c03\u7528"})}),"\n",(0,r.jsx)(s.h4,{id:"\u5047\u8bbe",children:(0,r.jsx)(s.strong,{children:"\u5047\u8bbe\uff1a"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A"})," \u5728 ",(0,r.jsx)(s.code,{children:"t=0"})," \u8c03\u7528 ",(0,r.jsx)(s.code,{children:"testFunction()"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b A \u9000\u51fa\uff0c\u7ebf\u7a0b B \u5728 ",(0,r.jsx)(s.code,{children:"t=10"})," \u8c03\u7528 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"\u6267\u884c\u6b65\u9aa4",children:(0,r.jsx)(s.strong,{children:"\u6267\u884c\u6b65\u9aa4\uff1a"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b A \u8fdb\u5165 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id == std::thread::id()"}),"\uff08\u9ed8\u8ba4\u503c\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_thread_id = A \u7684\u7ebf\u7a0b ID"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"CAS \u6210\u529f\uff1astored_thread_id"})," \u88ab\u8bbe\u7f6e\u4e3a ",(0,r.jsx)(s.code,{children:"A"})," \u7684 ID\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b A \u7ee7\u7eed\u6267\u884c\uff0c\u4e0d\u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"})]}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A \u6267\u884c\u5b8c\u6bd5\uff0c\u9000\u51fa\u51fd\u6570"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b B \u5728 ",(0,r.jsx)(s.code,{children:"t=10"})," \u8fdb\u5165 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id == A \u7684 ID"}),"\uff08\u5df2\u88ab\u7ebf\u7a0b A \u8bbe\u7f6e\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_thread_id = B \u7684\u7ebf\u7a0b ID"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"CAS \u5931\u8d25"}),"\uff08\u56e0\u4e3a ",(0,r.jsx)(s.code,{children:"stored_thread_id != std::thread::id()"}),"\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u4ecd\u7136\u662f A \u7684 ID\uff0cB \u7684 ID \u548c\u5b83\u4e0d\u5339\u914d"]}),"\u3002"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["\u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"}),"\uff0c\u7a0b\u5e8f\u5d29\u6e83\uff01\ud83d\udea8"]})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"\u6210\u529f\u62e6\u622a\u4e0d\u540c\u7ebf\u7a0b\u5148\u540e\u8c03\u7528\u7684\u60c5\u51b5\uff01"})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h3,{id:"-\u60c5\u51b5-2\u4e24\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8c03\u7528",children:(0,r.jsx)(s.strong,{children:"\u2705 \u60c5\u51b5 2\uff1a\u4e24\u4e2a\u7ebf\u7a0b\u300c\u540c\u65f6\u300d\u8c03\u7528"})}),"\n",(0,r.jsx)(s.h4,{id:"\u5047\u8bbe-1",children:(0,r.jsx)(s.strong,{children:"\u5047\u8bbe\uff1a"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b A \u548c \u7ebf\u7a0b B \u5728 ",(0,r.jsx)(s.code,{children:"t=0"})," \u51e0\u4e4e\u540c\u65f6\u8c03\u7528 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"\u6267\u884c\u6b65\u9aa4-1",children:(0,r.jsx)(s.strong,{children:"\u6267\u884c\u6b65\u9aa4\uff1a"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b A \u8fdb\u5165 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id == std::thread::id()"}),"\uff08\u9ed8\u8ba4\u503c\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_thread_id = A \u7684\u7ebf\u7a0b ID"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A \u6267\u884c CAS\uff1a"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u5982\u679c ",(0,r.jsx)(s.code,{children:"stored_thread_id == std::thread::id()"}),"\uff0c\u5219\u8bbe\u7f6e ",(0,r.jsx)(s.code,{children:"stored_thread_id = A \u7684 ID"})]}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:["CAS ",(0,r.jsx)(s.strong,{children:"\u53ef\u80fd\u6210\u529f"}),"\uff0c\u7ebf\u7a0b A \u7ee7\u7eed\u6267\u884c\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u7ebf\u7a0b B \u4e5f\u8fdb\u5165 ",(0,r.jsx)(s.code,{children:"testFunction()"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u53ef\u80fd\u5df2\u7ecf\u88ab ",(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A \u4fee\u6539\u4e3a A \u7684 ID"}),"\uff08\u5982\u679c A \u5148\u6267\u884c CAS\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"current_thread_id = B \u7684\u7ebf\u7a0b ID"}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b B \u6267\u884cCAS\uff1a"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u5982\u679c ",(0,r.jsx)(s.code,{children:"stored_thread_id == std::thread::id()"}),"\uff0c\u5c1d\u8bd5\u8bbe\u7f6e ",(0,r.jsx)(s.code,{children:"stored_thread_id = B \u7684 ID"})]}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u4f46 ",(0,r.jsx)(s.code,{children:"stored_thread_id \u5df2\u7ecf\u662f A \u7684 ID"}),"\uff0cCAS \u5931\u8d25"]}),"\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"stored_thread_id"})," \u4ecd\u7136\u662f A \u7684 ID\uff0cB \u7684 ID \u548c\u5b83\u4e0d\u5339\u914d\u3002"]}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["\u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"}),"\uff0c\u7a0b\u5e8f\u5d29\u6e83\uff01\ud83d\udea8"]})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["\u2705 ",(0,r.jsx)(s.strong,{children:"\u6210\u529f\u62e6\u622a\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8c03\u7528\u7684\u60c5\u51b5\uff01"})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-\u4e3a\u4ec0\u4e48-cas-\u662f\u5173\u952e",children:(0,r.jsx)(s.strong,{children:"\ud83d\udccc \u4e3a\u4ec0\u4e48 CAS \u662f\u5173\u952e\uff1f"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u4fdd\u8bc1\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u6210\u529f\u521d\u59cb\u5316 ",(0,r.jsx)(s.code,{children:"stored_thread_id"})]}),"\uff0c\u6240\u6709\u5176\u4ed6\u7ebf\u7a0b\u53ea\u80fd\u770b\u5230\u5df2\u7ecf\u5b58\u50a8\u7684\u503c\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"\u5373\u4f7f\u591a\u4e2a\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0cCAS \u4ecd\u7136\u662f\u7ebf\u7a0b\u5b89\u5168\u7684"}),"\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u7ade\u6001\u6761\u4ef6\uff08\u4e0d\u50cf ",(0,r.jsx)(s.code,{children:"mutex"})," \u9700\u8981\u663e\u5f0f\u9501\uff09\u3002"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["\u540e\u7eed\u7ebf\u7a0b\u65e0\u6cd5\u4fee\u6539 ",(0,r.jsx)(s.code,{children:"stored_thread_id"})]}),"\uff0c\u786e\u4fdd\u53ea\u80fd\u7531 ",(0,r.jsx)(s.strong,{children:"\u4e00\u4e2a\u7ebf\u7a0b"})," \u8bbf\u95ee\u8be5\u51fd\u6570\u3002"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"-\u603b\u7ed3",children:(0,r.jsx)(s.strong,{children:"\ud83d\udee0 \u603b\u7ed3"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"\u60c5\u51b5"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"\u6267\u884c\u903b\u8f91"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"\u7ed3\u679c"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A \u5148\u8c03\u7528\uff0c\u7ebf\u7a0b B \u540e\u8c03\u7528"})}),(0,r.jsxs)(s.td,{children:["\u7ebf\u7a0b A \u6210\u529f\u521d\u59cb\u5316 ",(0,r.jsx)(s.code,{children:"stored_thread_id"}),"\uff0c\u7ebf\u7a0b B \u53d1\u73b0 ID \u4e0d\u5339\u914d"]}),(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.strong,{children:["B \u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"})]})," \ud83d\udea8"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"\u7ebf\u7a0b A \u548c B \u540c\u65f6\u8c03\u7528"})}),(0,r.jsx)(s.td,{children:"\u7ebf\u7a0b A \u6216 B \u5176\u4e2d\u4e00\u4e2a\u5148\u6210\u529f CAS\uff0c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u5931\u8d25"}),(0,r.jsxs)(s.td,{children:[(0,r.jsxs)(s.strong,{children:["\u5931\u8d25\u7684\u7ebf\u7a0b\u89e6\u53d1 ",(0,r.jsx)(s.code,{children:"assert"})]})," \ud83d\udea8"]})]})]})]})]})}function x(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var d=n(6540);const r={},i=d.createContext(r);function t(e){const s=d.useContext(i);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),d.createElement(i.Provider,{value:s},e.children)}}}]);